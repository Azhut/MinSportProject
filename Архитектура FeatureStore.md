
### Архитектура папок для feature store

```
/feature_store
│
├── /data_processing
│   ├── /transformers      
│   ├── /aggregators       
│   ├── processing_service.py  
│
├── /data_storage
│   ├── /models            
│   ├── /repositories     
│   └── storage_service.py 
│
├── /api
│   ├── api_service.py    
│   ├── frontend_service.py 
│
├── /config
│   └── config.py         
│
├── /tests
│   ├── /unit_tests      
│   ├── /integration_tests  
│   └── test_data.json      
│
└── main.py             
```

### Описание папок и их логики

#### /data_processing
- **/transformers**: содержит модули для преобразования данных, например, очистка, нормализация данных, фильтрация и т.д.
- **/aggregators**: отвечает за логику агрегации данных (например, подсчет статистики, сводные таблицы)
- **`processing_service.py`**: этот файл будет содержать основную логику по обработке данных после их получения из DWH, включая вызов функций преобразования и агрегации

#### /data_storage
- **/models**: модели данных, которые описывают структуру таблиц в PostgreSQL. Эти модели могут быть созданы с использованием ORM, такой как SQLAlchemy
- **/repositories**: в этом модуле находятся репозитории, которые предоставляют интерфейсы для работы с PostgreSQL. Здесь реализуются функции для сохранения, чтения и обновления данных
- **`storage_service.py`**: этот файл будет содержать основную логику взаимодействия с базой данных PostgreSQL. Например, здесь будет функция для записи обработанных данных в соответствующие таблицы

#### /api
- **`api_service.py`**: отвечает за получение данных от DWH через API. Здесь может быть реализован клиент, который отправляет HTTP-запросы к DWH, получает данные и передает их в модуль обработки

#### /config
- **`config.py`**: файл конфигурации, где находятся настройки подключения к DWH API и PostgreSQL, а также любые другие параметры, такие как количество потоков обработки данных

#### /tests
- **/unit_tests**: содержит модульные тесты для проверки отдельных компонентов, например, для тестирования агрегаторов, трансформеров и API
- **/integration_tests**: тесты, которые проверяют интеграцию между различными частями системы, такими как взаимодействие между API и PostgreSQL
- **`test_data.json`**: файл с примерами тестовых данных, которые могут использоваться для тестирования.

#### main.py
Главный файл, который запускает всю систему, вызывая логику получения данных, их обработки и сохранения в PostgreSQL.

### Логика взаимодействия:

- **Получение данных из DWH**:
  - Логика получения данных по API находится в `/api/api_service.py`. Здесь происходит обращение к DWH, получение данных в формате JSON, их валидация и передача на обработку

- **Обработка данных**:
  - В `/data_processing/processing_service.py` находятся вызовы для трансформации и агрегации данных перед их сохранением. Это может включать очистку данных, вычисление статистик или другие формы агрегации

- **Сохранение в PostgreSQL**:
  - Модуль `/data_storage/storage_service.py` отвечает за взаимодействие с базой данных PostgreSQL, используя модели данных и репозитории для сохранения обработанных данных в таблицы.
