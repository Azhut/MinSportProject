
### Основная структура папок DWH

```
/dwh
│
├── /data_ingestion
│   ├── /parsers
│   ├── /validators
│   ├── /loaders
│   └── ingestion_service.py
│
├── /data_storage
│   ├── /models
│   ├── /repositories
│   ├── storage_service.py
│
├── /data_transfer
│   ├── transfer_service.py
│
├── /config
│   └── config.py
│
├── /tests
│   ├── /unit_tests
│   ├── /integration_tests
│   └── test_data.json
│
└── main.py
```

### Детализация каждой папки 

#### 1. `/data_ingestion` — Папка для работы с процессом загрузки данных
   - **Задачи**: Загрузка данных, их валидация, и сохранение в MongoDB
   - **Структура**:
     - `/parsers`: Логика для парсинга Excel файлов (например, парсер для каждой из 7 секций)
     - `/validators`: Скрипты для проверки данных на дубликаты, неверные форматы
     - `/loaders`: Логика для загрузки данных в MongoDB
     - `ingestion_service.py`: Главный сервис, который координирует процесс обработки данных от загрузки до сохранения



   - **Пример логики**:
     - **Парсинг данных**: В этой части системы мы получаем и читаем Excel-файлы и структурируем данные по разделам
     - **Валидация**: Проверяем каждый раздел на дубликаты или неправильные данные
     - **Загрузка**: После успешной валидации данные передаются в MongoDB через API для хранения

#### 2. `/data_storage` — Папка для работы с хранением данных
   - **Задачи**: Логика взаимодействия с MongoDB
   - **Структура**:
     - `/models`: Модели данных (структура коллекций MongoDB)
     - `/repositories`: Репозитории для доступа к данным и сохранения их в MongoDB 
     - `storage_service.py`: Главный сервис для хранения данных, который будет взаимодействовать с MongoDB

   - **Пример логики**:
     - **Модели данных**: Описание схем данных, которые сохраняются в MongoDB (например, структура разделов из Excel)
     - **Репозитории**: Методы для сохранения, обновления, получения и удаления данных в базе MongoDB

#### 3. `/data_transfer` — Папка для передачи данных в Feature Store
   - **Задачи**: Логика передачи данных из DWH в Feature Store для дальнейшей обработки
   - **Структура**:
     - `transfer_service.py`: Скрипт, который будет извлекать данные из MongoDB и передавать их в Feature Store

   - **Пример логики**:
     - **Извлечение данных**: Вытаскиваем данные из MongoDB на основе запроса (например, по идентификатору файла или по дате загрузки)
     - **Передача данных**: После извлечения данных данные передаются в Feature Store через соответствующий API

#### 4. `/config` — Папка для конфигураций
   - **Задачи**: Хранение конфигурационных файлов для работы с MongoDB и другими системами
   - **Структура**:
     - `config.py`: Конфигурационный файл для подключения к MongoDB, параметров работы с API, и других настроек (например, для обработки ошибок)

#### 5. `/tests` — Папка для тестирования
   - **Задачи**: Автоматическое тестирование компонентов системы
   - **Структура**:
     - `/unit_tests`: Юнит-тесты для отдельных модулей (например, тесты для валидаторов, парсеров)
     - `/integration_tests`: Интеграционные тесты для проверки совместной работы модулей (например, процесс загрузки данных и их сохранения)
     - `test_data.json`: Тестовые данные для проверки

#### 6. `main.py` — Основной вход в приложение
   - **Задачи**: Координация запуска всех сервисов DWH
   - **Логика**: Запуск сервиса загрузки, хранения и передачи данных

### Логика хранения и передачи данных

- **Хранение данных в MongoDB**:
  - Внутри `/data_storage` будет лежать вся логика для взаимодействия с MongoDB. Данные сохраняются через репозитории, которые взаимодействуют с моделями данных.
  - `storage_service.py` будет вызывать репозитории для сохранения и получения данных.

- **Передача данных в Feature Store**:
  - Логика передачи данных будет лежать в `/data_transfer`. Сервис `transfer_service.py` будет запрашивать данные из MongoDB через `storage_service.py`, обрабатывать их при необходимости и отправлять в Feature Store через API.
---
